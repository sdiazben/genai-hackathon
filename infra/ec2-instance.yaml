{
  "Resources": {
    "Instance": {
      "Type": "AWS::EC2::Instance",
      "Properties": {
        "ImageId": "ami-0e975de049c8e3200", # public image
        "InstanceType": "m5.large",
        "UserData": "IyEvYmluL2Jhc2gKClVOSVhfVVNFUj0iZWMyLXVzZXIiClVOSVhfVVNFUl9IT01FPSIvaG9tZS9lYzItdXNlciIKRU5WSVJPTk1FTlRfUEFUSD0iL2hvbWUvZWMyLXVzZXIvZW52aXJvbm1lbnQiClVOSVhfR1JPVVA9JChpZCAtZyAtbiAiJFVOSVhfVVNFUiIpCgojIEFwcGx5IHNlY3VyaXR5IHBhdGNoZXMKT1BFUkFUSU5HX1NZU1RFTT0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSB8IHNlZCAtZSAncy9eIi8vJyAtZSAncy8iJC8vJykKaWYgWyAiJE9QRVJBVElOR19TWVNURU0iID09ICJhbXpuIiBdOyB0aGVuCiAgICB5dW0gLXEgLXkgdXBkYXRlIC0tc2VjdXJpdHkgPiAvdG1wL2luaXQteXVtLXVwZGF0ZS1zZWN1cml0eSAyPiYxICYKZWxpZiBbICIkT1BFUkFUSU5HX1NZU1RFTSIgPT0gInVidW50dSIgXTsgdGhlbgogICAgdW5hdHRlbmRlZC11cGdyYWRlICYKZmkKCiMgYWRkIFNTSCBrZXkKaW5zdGFsbCAtZyAiJFVOSVhfR1JPVVAiIC1vICIkVU5JWF9VU0VSIiAtbSA3NTUgLWQgIiRVTklYX1VTRVJfSE9NRSIvLnNzaApjYXQgPDwnRU9GJyA+PiAiJFVOSVhfVVNFUl9IT01FIi8uc3NoL2F1dGhvcml6ZWRfa2V5cwojIEltcG9ydGFudAojIC0tLS0tLS0tLQojIFRoZSBmb2xsb3dpbmcgcHVibGljIGtleSBpcyByZXF1aXJlZCBieSBDbG91ZDkgSURFCiMgUmVtb3ZpbmcgdGhpcyBrZXkgd2lsbCBtYWtlIHRoaXMgRUMyIGluc3RhbmNlIGluYWNjZXNzaWJsZSBieSB0aGUgSURFCiMKY2VydC1hdXRob3JpdHkgc3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFDQVFDdU1OYmZDeGNkb0cyMTRueUNEaEVDNm0xcC9Hci82aWtSdVJubDlCaitNMVdLaE1pTm51bDU5OG51OTNQcFA4NkdpTmZaT0QvQWxUOVdVTGFRV1NVNldKYkxJR25aSG1ZSjM5MWc1TFhpdENqZlM3dEt2UlVWUlNmb2ZrTWpzdEtRQXJ0dVg4QTNMK09RM0N5RVRWT0lSVzhSbVE5K3kyUVBPL2pnTWc4SGthN05jTG5nMzhHT3ZYdlZkdTZ2TEVGaXU4cEtFczZWaXNpczA2eVQ5RXAyTXVYNStwWUlNekM1SncxR1duN1pLYks1TVg3MG0rZUtHM05pTWlGNnVja0YrK2VpVWpGL25HRUptcFc4SlJYMHA0KzJlWnJYYnVtK2xoY2Y3ZHdCcEg5NXFGMHZIYWdpam9FaDZyRWFYek5hUkxFcmQxNG4rUC9wdE5qNTlmT2YyTkVLQVJVbVVENFpMakhDMjFRcllqM3A5TzU4TzBvdnZWcnAvdW42Rm50K2F5L0JSaGRCVS9iMEZKZk82MXhxNTRTTjlTVVRaeERZTENOT0ZFeEhSdjg2OXZqSHlPekRpeFZLbUhkbEhuUUpTK0I1a0hsNytSOEVwaGpkVlFpTWg4cEpjT1grV0d1RWNUSnlWOHp1bDk5bWpkT2piQWtRSnZTSU5ORXB1bGtrcUF4OXZ6LzEyaU82NldBT1I1NnpkVWErVWxJbmR5SEh5MG8xZjdoVW5QMUNnMTByN2RWQTlWclJyYTQ4NUZzZGh5WGxTODh5a1B5VHNMbmxoTTcrNXZwUkRJMGlScnFZR0NKK2RKaUg0dTlabnM3blJPZXRIWW5ydVd1QXEwT1R1UThUSVU5dElmMDYySVNTMldkdWxTQnk3eXJjNmtQS2NsWkw4anppWHc9PSAxN2Y4MTlhYWY0NmE0NTdmYThiMDZlNjQ5NGFjNzhmMkBjbG91ZDkuYW1hem9uLmNvbQoKCiMKIyBBZGQgYW55IGFkZGl0aW9uYWwga2V5cyBiZWxvdyB0aGlzIGxpbmUKIwoKRU9GCgojIGFsbG93IGF1dG9tYXRpYyBzaHV0ZG93bgplY2hvICIkVU5JWF9VU0VSICAgIEFMTD0oQUxMKSBOT1BBU1NXRDogL3NiaW4vcG93ZXJvZmYsIC9zYmluL3JlYm9vdCwgL3NiaW4vc2h1dGRvd24iID4+IC9ldGMvc3Vkb2VycwoKbG4gLXMgL29wdC9jOSAiJFVOSVhfVVNFUl9IT01FIi8uYzkKY2hvd24gLVIgIiRVTklYX1VTRVIiOiIkVU5JWF9HUk9VUCIgIiRVTklYX1VTRVJfSE9NRSIvLmM5IC9vcHQvYzkKaW5zdGFsbCAtZyAiJFVOSVhfR1JPVVAiIC1vICIkVU5JWF9VU0VSIiAtbSA3NTUgLWQgIiRFTlZJUk9OTUVOVF9QQVRIIgoKaWYgWyAiJEVOVklST05NRU5UX1BBVEgiID09ICIvaG9tZS9lYzItdXNlci9lbnZpcm9ubWVudCIgXSAmJiBncmVwICJhbGlhcyBweXRob249cHl0aG9uMjciICIkVU5JWF9VU0VSX0hPTUUiLy5iYXNocmM7IHRoZW4KCiAgICBjYXQgPDwnRU9GJyA+ICIkVU5JWF9VU0VSX0hPTUUiLy5iYXNocmMKIyAuYmFzaHJjCgpleHBvcnQgUEFUSD0kUEFUSDokSE9NRS8ubG9jYWwvYmluOiRIT01FL2JpbgoKIyBsb2FkIG52bQpleHBvcnQgTlZNX0RJUj0iJEhPTUUvLm52bSIKWyAiJEJBU0hfVkVSU0lPTiIgXSAmJiBucG0oKSB7CiAgICAjIGhhY2s6IGF2b2lkIHNsb3cgbnBtIHNhbml0eSBjaGVjayBpbiBudm0KICAgIGlmIFsgIiQqIiA9PSAiY29uZmlnIGdldCBwcmVmaXgiIF07IHRoZW4gd2hpY2ggbm9kZSB8IHNlZCAicy9iaW5cL25vZGUvLyI7CiAgICBlbHNlICQod2hpY2ggbnBtKSAiJEAiOyBmaQp9CiMgWyAtcyAiJE5WTV9ESVIvbnZtLnNoIiBdICYmIC4gIiROVk1fRElSL252bS5zaCIgICMgVGhpcyBsb2FkcyBudm0KcnZtX3NpbGVuY2VfcGF0aF9taXNtYXRjaF9jaGVja19mbGFnPTEgIyBwcmV2ZW50IHJ2bSBjb21wbGFpbnRzIHRoYXQgbnZtIGlzIGZpcnN0IGluIFBBVEgKdW5zZXQgbnBtICMgZW5kIGhhY2sKCgojIFVzZXIgc3BlY2lmaWMgYWxpYXNlcyBhbmQgZnVuY3Rpb25zCmFsaWFzIHB5dGhvbj1weXRob24yNwoKIyBtb2RpZmljYXRpb25zIG5lZWRlZCBvbmx5IGluIGludGVyYWN0aXZlIG1vZGUKaWYgWyAiJFBTMSIgIT0gIiIgXTsgdGhlbgogICAgIyBTZXQgZGVmYXVsdCBlZGl0b3IgZm9yIGdpdAogICAgZ2l0IGNvbmZpZyAtLWdsb2JhbCBjb3JlLmVkaXRvciBuYW5vCgogICAgIyBUdXJuIG9uIGNoZWNrd2luc2l6ZQogICAgc2hvcHQgLXMgY2hlY2t3aW5zaXplCgogICAgIyBrZWVwIG1vcmUgaGlzdG9yeQogICAgc2hvcHQgLXMgaGlzdGFwcGVuZAogICAgZXhwb3J0IEhJU1RTSVpFPTEwMDAwMAogICAgZXhwb3J0IEhJU1RGSUxFU0laRT0xMDAwMDAKICAgIGV4cG9ydCBQUk9NUFRfQ09NTUFORD0iaGlzdG9yeSAtYTsiCgogICAgIyBTb3VyY2UgZm9yIEdpdCBQUzEgZnVuY3Rpb24KICAgIGlmICEgdHlwZSAtdCBfX2dpdF9wczEgJiYgWyAtZSAiL3Vzci9zaGFyZS9naXQtY29yZS9jb250cmliL2NvbXBsZXRpb24vZ2l0LXByb21wdC5zaCIgXTsgdGhlbgogICAgICAgIC4gL3Vzci9zaGFyZS9naXQtY29yZS9jb250cmliL2NvbXBsZXRpb24vZ2l0LXByb21wdC5zaAogICAgZmkKCiAgICAjIENsb3VkOSBkZWZhdWx0IHByb21wdAogICAgX2Nsb3VkOV9wcm9tcHRfdXNlcigpIHsKICAgICAgICBpZiBbICIkQzlfVVNFUiIgPSByb290IF07IHRoZW4KICAgICAgICAgICAgZWNobyAiJFVTRVIiCiAgICAgICAgZWxzZQogICAgICAgICAgICBlY2hvICIkQzlfVVNFUiIKICAgICAgICBmaQogICAgfQoKICAgIFBTMT0nXFtcMDMzWzAxOzMybVxdJChfY2xvdWQ5X3Byb21wdF91c2VyKVxbXDAzM1swMG1cXTpcW1wwMzNbMDE7MzRtXF1cd1xbXDAzM1swMG1cXSQoX19naXRfcHMxICIgKCVzKSIgMj4vZGV2L251bGwpICQgJwpmaQoKRU9GCgogICAgY2hvd24gIiRVTklYX1VTRVIiOiIkVU5JWF9HUk9VUCIgIiRVTklYX1VTRVJfSE9NRSIvLmJhc2hyYwpmaQoKaWYgWyAiJEVOVklST05NRU5UX1BBVEgiID09ICIvaG9tZS9lYzItdXNlci9lbnZpcm9ubWVudCIgXSAmJiBbICEgLWYgIiRFTlZJUk9OTUVOVF9QQVRIIi9SRUFETUUubWQgXTsgdGhlbgogICAgY2F0IDw8J0VPRicgPj4gIiRFTlZJUk9OTUVOVF9QQVRIIi9SRUFETUUubWQKICAgICAgICAgX19fICAgICAgICBfX19fX18gICAgIF9fX18gXyAgICAgICAgICAgICAgICAgXyAgX19fCiAgICAgICAgLyBcIFwgICAgICAvIC8gX19ffCAgIC8gX19ffCB8IF9fXyAgXyAgIF8gIF9ffCB8LyBfIFwKICAgICAgIC8gXyBcIFwgL1wgLyAvXF9fXyBcICB8IHwgICB8IHwvIF8gXHwgfCB8IHwvIF9gIHwgKF8pIHwKICAgICAgLyBfX18gXCBWICBWIC8gIF9fXykgfCB8IHxfX198IHwgKF8pIHwgfF98IHwgKF98IHxcX18sIHwKICAgICAvXy8gICBcX1xfL1xfLyAgfF9fX18vICAgXF9fX198X3xcX19fLyBcX18sX3xcX18sX3wgIC9fLwogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpIaSB0aGVyZSEgV2VsY29tZSB0byBBV1MgQ2xvdWQ5IQoKVG8gZ2V0IHN0YXJ0ZWQsIGNyZWF0ZSBzb21lIGZpbGVzLCBwbGF5IHdpdGggdGhlIHRlcm1pbmFsLApvciB2aXNpdCBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vY29uc29sZS9jbG91ZDkvIGZvciBvdXIgZG9jdW1lbnRhdGlvbi4KCkhhcHB5IGNvZGluZyEKCkVPRgoKICAgIGNob3duICIkVU5JWF9VU0VSIjoiJFVOSVhfR1JPVVAiICIkVU5JWF9VU0VSX0hPTUUiL2Vudmlyb25tZW50L1JFQURNRS5tZApmaQoKIyBGaXggZm9yIHBlcm1pc3Npb24gZXJyb3Igd2hlbiB0cnlpbmcgdG8gY2FsbCBgZ2VtIGluc3RhbGxgCmNob3duICIkVU5JWF9VU0VSIiAtUiAvdXNyL2xvY2FsL3J2bS9nZW1zCgojVGhpcyBzY3JpcHQgaXMgYXBwZW5kZWQgdG8gYW5vdGhlciBiYXNoIHNjcmlwdCwgc28gaXQgZG9lcyBub3QgbmVlZCBhIGJhc2ggc2NyaXB0IGZpbGUgaGVhZGVyLgoKVU5JWF9VU0VSX0hPTUU9Ii9ob21lL2VjMi11c2VyIgoKQzlfRElSPSRVTklYX1VTRVJfSE9NRS8uYzkKQ09ORklHX0ZJTEVfUEFUSD0iJEM5X0RJUiIvYXV0b3NodXRkb3duLWNvbmZpZ3VyYXRpb24KVkZTX0NIRUNLX0ZJTEVfUEFUSD0iJEM5X0RJUiIvc3RvcC1pZi1pbmFjdGl2ZS5zaApDT05GSUdfTUVUUklDX0ZJTEVfUEFUSD0iJEM5X0RJUiIvYXV0b3NodXRkb3duLXRpbWVzdGFtcAoKZWNobyAiU0hVVERPV05fVElNRU9VVD0zNjAwIiA+ICIkQ09ORklHX0ZJTEVfUEFUSCIKY2htb2QgYSt3ICIkQ09ORklHX0ZJTEVfUEFUSCIKCnRvdWNoICIkQ09ORklHX01FVFJJQ19GSUxFX1BBVEgiCmNobW9kIGErd3IgIiRDT05GSUdfTUVUUklDX0ZJTEVfUEFUSCIKCmVjaG8gLWUgJyMhL2Jpbi9iYXNoCnNldCAtZXVvIHBpcGVmYWlsCkNPTkZJRz0kKGNhdCAnJENPTkZJR19GSUxFX1BBVEgnKQpTSFVURE9XTl9USU1FT1VUPSR7Q09ORklHIyo9fQppZiAhIFtbICRTSFVURE9XTl9USU1FT1VUID1+IF5bMC05XSokIF1dOyB0aGVuCiAgICBlY2hvICJzaHV0ZG93biB0aW1lb3V0IGlzIGludmFsaWQiCiAgICBleGl0IDEKZmkKaXNfc2h1dHRpbmdfZG93bigpIHsKICAgIGlzX3NodXR0aW5nX2Rvd25fdWJ1bnR1ICY+IC9kZXYvbnVsbCB8fCBpc19zaHV0dGluZ19kb3duX2FsMSAmPiAvZGV2L251bGwgfHwgaXNfc2h1dHRpbmdfZG93bl9hbDIgJj4gL2Rldi9udWxsIHx8IGlzX3NodXR0aW5nX2Rvd25fYWwyMDIzICY+IC9kZXYvbnVsbAp9CmlzX3NodXR0aW5nX2Rvd25fdWJ1bnR1KCkgewogICAgbG9jYWwgVElNRU9VVAogICAgVElNRU9VVD0kKGJ1c2N0bCBnZXQtcHJvcGVydHkgb3JnLmZyZWVkZXNrdG9wLmxvZ2luMSAvb3JnL2ZyZWVkZXNrdG9wL2xvZ2luMSBvcmcuZnJlZWRlc2t0b3AubG9naW4xLk1hbmFnZXIgU2NoZWR1bGVkU2h1dGRvd24pCiAgICBpZiBbICIkPyIgLW5lICIwIiBdOyB0aGVuCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCiAgICBsb2NhbCBTSFVURE9XTl9USU1FU1RBTVAKICAgIFNIVVRET1dOX1RJTUVTVEFNUD0iJChlY2hvICRUSU1FT1VUIHwgYXdrICJ7cHJpbnQgXCQzfSIpIgogICAgaWYgWyAkU0hVVERPV05fVElNRVNUQU1QID09ICIwIiBdIHx8IFsgJFNIVVRET1dOX1RJTUVTVEFNUCA9PSAiMTg0NDY3NDQwNzM3MDk1NTE2MTUiIF07IHRoZW4KICAgICAgICByZXR1cm4gMQogICAgZWxzZQogICAgICAgIHJldHVybiAwCiAgICBmaQp9CmlzX3NodXR0aW5nX2Rvd25fYWwxKCkgewogICAgcGdyZXAgc2h1dGRvd24KfQppc19zaHV0dGluZ19kb3duX2FsMigpIHsKICAgIGxvY2FsIEZJTEUKICAgIEZJTEU9L3J1bi9zeXN0ZW1kL3NodXRkb3duL3NjaGVkdWxlZAogICAgaWYgW1sgLWYgIiRGSUxFIiBdXTsgdGhlbgogICAgICAgIHJldHVybiAwCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCn0KaXNfc2h1dHRpbmdfZG93bl9hbDIwMjMoKSB7CiAgICBsb2NhbCBUSU1FT1VUCiAgICBUSU1FT1VUPSQoYnVzY3RsIGdldC1wcm9wZXJ0eSBvcmcuZnJlZWRlc2t0b3AubG9naW4xIC9vcmcvZnJlZWRlc2t0b3AvbG9naW4xIG9yZy5mcmVlZGVza3RvcC5sb2dpbjEuTWFuYWdlciBTY2hlZHVsZWRTaHV0ZG93bikKICAgIGlmIFsgIiQ/IiAtbmUgIjAiIF07IHRoZW4KICAgICAgICByZXR1cm4gMQogICAgZmkKICAgIGxvY2FsIFNIVVRET1dOX1RJTUVTVEFNUAogICAgU0hVVERPV05fVElNRVNUQU1QPSIkKGVjaG8gJFRJTUVPVVQgfCBhd2sgIntwcmludCBcJDN9IikiCiAgICBpZiBbICRTSFVURE9XTl9USU1FU1RBTVAgPT0gIjAiIF0gfHwgWyAkU0hVVERPV05fVElNRVNUQU1QID09ICIxODQ0Njc0NDA3MzcwOTU1MTYxNSIgXTsgdGhlbgogICAgICAgIHJldHVybiAxCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCn0KaXNfdmZzX2Nvbm5lY3RlZCgpIHsKICAgIHBncmVwIC1mIHZmcy13b3JrZXIgPi9kZXYvbnVsbAp9CgppZiBpc19zaHV0dGluZ19kb3duOyB0aGVuCiAgICBpZiBbWyAhICRTSFVURE9XTl9USU1FT1VUID1+IF5bMC05XSskIF1dIHx8IGlzX3Zmc19jb25uZWN0ZWQ7IHRoZW4KICAgICAgICBzdWRvIHNodXRkb3duIC1jCiAgICAgICAgZWNobyA+ICInJENPTkZJR19NRVRSSUNfRklMRV9QQVRIJyIKICAgIGVsc2UKICAgICAgICBUSU1FU1RBTVA9JChkYXRlICslcykKICAgICAgICBlY2hvICIkVElNRVNUQU1QIiA+ICInJENPTkZJR19NRVRSSUNfRklMRV9QQVRIJyIKICAgIGZpCmVsc2UKICAgIGlmIFtbICRTSFVURE9XTl9USU1FT1VUID1+IF5bMC05XSskIF1dICYmICEgaXNfdmZzX2Nvbm5lY3RlZDsgdGhlbgogICAgICAgIHN1ZG8gc2h1dGRvd24gLWggJFNIVVRET1dOX1RJTUVPVVQKICAgIGZpCmZpJyA+ICIkVkZTX0NIRUNLX0ZJTEVfUEFUSCIKCmNobW9kICt4ICIkVkZTX0NIRUNLX0ZJTEVfUEFUSCIKCmVjaG8gIiogKiAqICogKiByb290ICRWRlNfQ0hFQ0tfRklMRV9QQVRIIiA+IC9ldGMvY3Jvbi5kL2M5LWF1dG9tYXRpYy1zaHV0ZG93bgo=",
        "Tags": [
          {
            "Key": "Name",
            "Value": "aws-cloud9-aws-genai-workshop-17f819aaf46a457fa8b06e6494ac78f2"
          }
        ],
        "NetworkInterfaces": [
          {
            "AssociatePublicIpAddress": true,
            "DeviceIndex": 0,
            "SubnetId": "subnet-0aa808431c8655e46",
            "GroupSet": [
              {
                "Ref": "InstanceSecurityGroup"
              }
            ],
            "DeleteOnTermination": true,
            "Description": "ENI for AWS Cloud9 environment aws-cloud9-aws-genai-workshop-17f819aaf46a457fa8b06e6494ac78f2"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeType": "gp3"
            }
          }
        ]
      }
    },
    "InstanceSecurityGroup": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "Security group for AWS Cloud9 environment aws-cloud9-aws-genai-workshop-17f819aaf46a457fa8b06e6494ac78f2",
        "VpcId": "vpc-0ff0ae7d3289dee12",
        "SecurityGroupIngress": [
          {
            "FromPort": 22,
            "ToPort": 22,
            "IpProtocol": "tcp",
            "CidrIp": "34.218.119.32/27"
          },
          {
            "FromPort": 22,
            "ToPort": 22,
            "IpProtocol": "tcp",
            "CidrIp": "34.217.141.224/27"
          }
        ],
        "Tags": [
          {
            "Key": "Name",
            "Value": "aws-cloud9-aws-genai-workshop-17f819aaf46a457fa8b06e6494ac78f2"
          }
        ]
      }
    }
  }
}